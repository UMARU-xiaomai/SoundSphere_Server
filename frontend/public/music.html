<!DOCTYPE html>
<html lang="zh-CN" class="no-js">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>浏览音乐 - SoundSphere</title>
    <link rel="stylesheet" href="/src/styles/main.css">
    <link rel="stylesheet" href="/src/styles/icons.css">
    <link rel="stylesheet" href="/src/styles/placeholders.css">
    <link rel="stylesheet" href="/src/styles/music.css">
    <link rel="icon" type="image/png" href="/src/assets/favicon.png">
    <meta name="description" content="在SoundSphere上浏览和发现音乐，找到你喜欢的音乐创作者和作品">
    <meta name="theme-color" content="#6200ea">
    <meta name="color-scheme" content="light dark">
    <link rel="preload" href="/src/assets/placeholder-cover.jpg" as="image">
    <script>document.documentElement.classList.remove('no-js');</script>
</head>
<body class="auto-dark-mode">
    <a href="#main-content" class="sr-only">跳转到主要内容</a>
    
    <header class="main-header">
        <div class="container">
            <div class="logo">
                <a href="index.html" aria-label="SoundSphere首页">
                    <img src="/src/assets/logo.png" alt="SoundSphere Logo">
                    <span>SoundSphere</span>
                </a>
            </div>
            <nav class="main-nav" aria-label="主导航">
                <ul>
                    <li><a href="music.html" class="nav-link active">浏览音乐</a></li>
                    <li><a href="collaboration.html" class="nav-link">创作室</a></li>
                    <li><a href="knowledge.html" class="nav-link">知识库</a></li>
                    <li><a href="marketplace.html" class="nav-link">市场</a></li>
                </ul>
            </nav>
            <div class="user-actions">
                <button class="btn btn-secondary" id="login-btn">登录</button>
                <button class="btn btn-primary" id="signup-btn">注册</button>
                
                <button class="theme-toggle" id="theme-toggle" aria-label="切换暗黑模式">
                    <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
                    <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
                </button>
            </div>
            
            <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-expanded="false" aria-controls="mobile-nav" aria-label="切换菜单">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        
        <div class="mobile-nav" id="mobile-nav">
            <ul>
                <li><a href="music.html" class="nav-link active">浏览音乐</a></li>
                <li><a href="collaboration.html" class="nav-link">创作室</a></li>
                <li><a href="knowledge.html" class="nav-link">知识库</a></li>
                <li><a href="marketplace.html" class="nav-link">市场</a></li>
            </ul>
            <div class="user-actions">
                <button class="btn btn-secondary" id="mobile-login-btn">登录</button>
                <button class="btn btn-primary" id="mobile-signup-btn">注册</button>
            </div>
        </div>
    </header>

    <main id="main-content" class="with-sidebar">
        <div class="main-content">
            <section class="music-hero">
                <div class="container">
                    <h1>发现优质音乐</h1>
                    <p>浏览最新、最热门的音乐作品，发现你的下一个最爱</p>
                    <div class="search-bar" role="search">
                        <label for="music-search" class="sr-only">搜索音乐、创作者或标签</label>
                        <input type="text" id="music-search" placeholder="搜索音乐、创作者或标签...">
                        <button class="btn btn-primary" aria-label="搜索">
                            <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                            <span class="btn-text">搜索</span>
                        </button>
                    </div>
                </div>
            </section>

            <section class="browse-music">
                <div class="container">
                    <div class="controls-wrapper">
                        <div class="category-filters" role="tablist">
                            <button class="filter-btn active" data-filter="all" role="tab" aria-selected="true" id="tab-all">全部</button>
                            <button class="filter-btn" data-filter="tracks" role="tab" aria-selected="false" id="tab-tracks">乐曲</button>
                            <button class="filter-btn" data-filter="beats" role="tab" aria-selected="false" id="tab-beats">伴奏</button>
                            <button class="filter-btn" data-filter="samples" role="tab" aria-selected="false" id="tab-samples">采样</button>
                            <button class="filter-btn" data-filter="podcasts" role="tab" aria-selected="false" id="tab-podcasts">播客</button>
                        </div>
                        
                        <div class="sort-options">
                            <label for="sort-music">排序方式：</label>
                            <select id="sort-music" aria-label="排序方式">
                                <option value="trending">热门</option>
                                <option value="newest">最新</option>
                                <option value="most-played">播放最多</option>
                                <option value="most-liked">赞最多</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="music-grid" id="music-grid" role="tabpanel" aria-labelledby="tab-all">
                        <div class="loading-indicator" id="music-loading">
                            <div class="spinner" aria-label="加载中"></div>
                            <p>加载音乐...</p>
                        </div>
                        <!-- 音乐卡片将通过JavaScript动态加载 -->
                    </div>
                    
                    <button class="btn btn-secondary btn-large" id="load-more-btn">加载更多</button>
                </div>
            </section>

            <section class="trending-artists">
                <div class="container">
                    <h2 class="section-title">热门创作者</h2>
                    <div class="artists-grid">
                        <div class="artist-card">
                            <div class="artist-avatar">
                                <img src="/src/assets/placeholder-avatar.jpg" alt="李明的头像">
                            </div>
                            <h3><a href="#" class="artist-name">李明</a></h3>
                            <p class="artist-genres">电子 / 流行</p>
                            <button class="btn btn-outline">关注</button>
                        </div>
                        
                        <div class="artist-card">
                            <div class="artist-avatar">
                                <img src="/src/assets/placeholder-avatar.jpg" alt="张伟的头像">
                            </div>
                            <h3><a href="#" class="artist-name">张伟</a></h3>
                            <p class="artist-genres">实验 / 氛围</p>
                            <button class="btn btn-outline">关注</button>
                        </div>
                        
                        <div class="artist-card">
                            <div class="artist-avatar">
                                <img src="/src/assets/placeholder-avatar.jpg" alt="王丽的头像">
                            </div>
                            <h3><a href="#" class="artist-name">王丽</a></h3>
                            <p class="artist-genres">爵士 / 古典</p>
                            <button class="btn btn-outline">关注</button>
                        </div>
                        
                        <div class="artist-card">
                            <div class="artist-avatar">
                                <img src="/src/assets/placeholder-avatar.jpg" alt="陈静的头像">
                            </div>
                            <h3><a href="#" class="artist-name">陈静</a></h3>
                            <p class="artist-genres">钢琴 / 轻音乐</p>
                            <button class="btn btn-outline">关注</button>
                        </div>
                    </div>
                </div>
            </section>
        </div>
        
        <!-- 右侧音乐播放器 -->
        <aside class="music-player-sidebar" id="music-player-sidebar">
            <div class="player-container">
                <div class="current-track">
                    <div class="track-info">
                        <div class="track-cover">
                            <img src="/src/assets/placeholder-cover.jpg" id="current-track-cover" alt="当前播放音乐封面">
                        </div>
                        <div class="track-details">
                            <h3 id="current-track-title">选择音乐开始播放</h3>
                            <p id="current-track-artist" class="track-artist">-</p>
                        </div>
                    </div>
                </div>
                
                <div class="player-controls-wrapper">
                    <div class="progress-bar-container">
                        <span id="current-time">0:00</span>
                        <div class="progress-bar">
                            <div class="progress-bar-inner" id="progress-bar-inner"></div>
                            <input 
                                type="range" 
                                id="progress-slider" 
                                min="0" 
                                max="100" 
                                value="0"
                                step="0.1"
                                aria-label="播放进度"
                            >
                        </div>
                        <span id="total-time">0:00</span>
                    </div>
                    
                    <div class="player-buttons">
                        <button class="player-btn" id="shuffle-btn" aria-label="随机播放">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="16 3 21 3 21 8"></polyline>
                                <line x1="4" y1="20" x2="21" y2="3"></line>
                                <polyline points="21 16 21 21 16 21"></polyline>
                                <line x1="15" y1="15" x2="21" y2="21"></line>
                                <line x1="4" y1="4" x2="9" y2="9"></line>
                            </svg>
                        </button>
                        <button class="player-btn" id="prev-btn" aria-label="上一首">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polygon points="19 20 9 12 19 4 19 20"></polygon>
                                <line x1="5" y1="19" x2="5" y2="5"></line>
                            </svg>
                        </button>
                        <button class="player-btn play-btn-large" id="play-pause-btn" aria-label="播放">
                            <svg class="play-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polygon points="5 3 19 12 5 21 5 3"></polygon>
                            </svg>
                            <svg class="pause-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="6" y="4" width="4" height="16"></rect>
                                <rect x="14" y="4" width="4" height="16"></rect>
                            </svg>
                        </button>
                        <button class="player-btn" id="next-btn" aria-label="下一首">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polygon points="5 4 15 12 5 20 5 4"></polygon>
                                <line x1="19" y1="5" x2="19" y2="19"></line>
                            </svg>
                        </button>
                        <button class="player-btn" id="repeat-btn" aria-label="循环播放">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="17 1 21 5 17 9"></polyline>
                                <path d="M3 11V9a4 4 0 0 1 4-4h14"></path>
                                <polyline points="7 23 3 19 7 15"></polyline>
                                <path d="M21 13v2a4 4 0 0 1-4 4H3"></path>
                            </svg>
                        </button>
                    </div>
                    
                    <div class="volume-control">
                        <button class="player-btn" id="mute-btn" aria-label="静音">
                            <svg class="volume-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                                <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                                <path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path>
                            </svg>
                            <svg class="mute-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                                <line x1="23" y1="9" x2="17" y2="15"></line>
                                <line x1="17" y1="9" x2="23" y2="15"></line>
                            </svg>
                        </button>
                        <input 
                            type="range" 
                            id="volume-slider" 
                            class="volume-slider" 
                            min="0" 
                            max="100" 
                            value="80"
                            aria-label="音量控制"
                        >
                    </div>
                </div>
                
                <div class="playlist" id="current-playlist">
                    <h3>当前播放列表</h3>
                    <ul class="playlist-items" id="playlist-items">
                        <!-- 播放列表将通过JavaScript动态生成 -->
                        <li class="playlist-empty">暂无歌曲</li>
                    </ul>
                </div>
            </div>
        </aside>
        
        <a href="#" id="back-to-top" class="back-to-top" aria-label="返回顶部">
            <div class="arrow-up-icon"></div>
        </a>
    </main>

    <footer class="main-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="/src/assets/sub_logo.png" alt="SoundSphere Logo">
                    <p>SoundSphere - 音乐创作与分享平台</p>
                </div>
                <div class="footer-links">
                    <div class="link-group">
                        <h4>关于</h4>
                        <ul>
                            <li><a href="#">关于我们</a></li>
                            <li><a href="#">使用条款</a></li>
                            <li><a href="#">隐私政策</a></li>
                            <li><a href="#">版权信息</a></li>
                        </ul>
                    </div>
                    <div class="link-group">
                        <h4>功能</h4>
                        <ul>
                            <li><a href="music.html">音乐上传</a></li>
                            <li><a href="collaboration.html">实时协作</a></li>
                            <li><a href="knowledge.html">知识库</a></li>
                            <li><a href="marketplace.html">商城</a></li>
                        </ul>
                    </div>
                    <div class="link-group">
                        <h4>支持</h4>
                        <ul>
                            <li><a href="#">帮助中心</a></li>
                            <li><a href="#">常见问题</a></li>
                            <li><a href="#">联系我们</a></li>
                            <li><a href="#">反馈建议</a></li>
                        </ul>
                    </div>
                </div>
                <div class="footer-newsletter">
                    <h4>订阅最新动态</h4>
                    <p>获取最新的音乐资讯与平台更新</p>
                    <form class="newsletter-form">
                        <input type="email" placeholder="输入你的邮箱" required aria-label="电子邮箱">
                        <button type="submit" class="btn btn-primary">订阅</button>
                    </form>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 SoundSphere. 保留所有权利。</p>
                <div class="social-links">
                    <a href="#" class="social-link" aria-label="Facebook"><img src="/src/assets/icons/facebook.svg" alt=""></a>
                    <a href="#" class="social-link" aria-label="Twitter"><img src="/src/assets/icons/twitter.svg" alt=""></a>
                    <a href="#" class="social-link" aria-label="Instagram"><img src="/src/assets/icons/instagram.svg" alt=""></a>
                    <a href="#" class="social-link" aria-label="YouTube"><img src="/src/assets/icons/youtube.svg" alt=""></a>
                </div>
            </div>
        </div>
    </footer>

    <!-- 登录模态框 -->
    <div class="modal" id="login-modal" aria-labelledby="modal-login-title" aria-hidden="true" role="dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-login-title">登录到 SoundSphere</h3>
                <button class="close-btn" aria-label="关闭">&times;</button>
            </div>
            <div class="modal-body">
                <form id="login-form">
                    <div class="form-group">
                        <label for="login-email">邮箱</label>
                        <input type="email" id="login-email" required>
                    </div>
                    <div class="form-group">
                        <label for="login-password">密码</label>
                        <input type="password" id="login-password" required>
                    </div>
                    <div class="auth-error" style="display: none; color: #e74c3c; margin-bottom: 10px;"></div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary btn-full">登录</button>
                    </div>
                </form>
                <div class="modal-footer">
                    <p>还没有账号？<a href="#" id="show-signup">注册</a></p>
                    <p><a href="#" id="forgot-password">忘记密码？</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- 注册模态框 -->
    <div class="modal" id="signup-modal" aria-labelledby="modal-signup-title" aria-hidden="true" role="dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-signup-title">注册 SoundSphere</h3>
                <button class="close-btn" aria-label="关闭">&times;</button>
            </div>
            <div class="modal-body">
                <form id="signup-form">
                    <div class="form-group">
                        <label for="signup-username">用户名</label>
                        <input type="text" id="signup-username" required>
                    </div>
                    <div class="form-group">
                        <label for="signup-email">邮箱</label>
                        <input type="email" id="signup-email" required>
                    </div>
                    <div class="form-group">
                        <label for="signup-password">密码</label>
                        <input type="password" id="signup-password" required>
                    </div>
                    <div class="form-group">
                        <label for="signup-confirm-password">确认密码</label>
                        <input type="password" id="signup-confirm-password" required>
                    </div>
                    <div class="auth-error" style="display: none; color: #e74c3c; margin-bottom: 10px;"></div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary btn-full">注册</button>
                    </div>
                </form>
                <div class="modal-footer">
                    <p>已有账号？<a href="#" id="show-login">登录</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- 音频元素 - 不可见 -->
    <audio id="audio-player" preload="metadata"></audio>

    <script src="/src/utils/api.js"></script>
    <script src="/src/utils/auth.js"></script>
    <script src="/src/utils/ui.js"></script>
    <script src="/src/pages/music.js"></script>
</body>
</html> 